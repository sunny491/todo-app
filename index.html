<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>To-Do App</title>
    <style>
        body { font-family: Arial; max-width: 650px; margin: 40px auto; background: #f6f6f6; padding: 20px; border-radius: 10px; transition: 0.3s; }
        body.dark { background: #1e1e1e; color: white; }
        h2 { text-align: center; }
        #taskInput { width: 65%; padding: 10px; margin-right: 10px; }
        button { padding: 10px 15px; cursor: pointer; margin: 3px; }
        .task { display: flex; justify-content: space-between; padding: 10px; margin: 5px 0; background: white; border-radius: 5px; }
        body.dark .task { background: #2c2c2c; color: white; }
        .completed { text-decoration: line-through; color: green; }
        #counts { margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>
<h2>To-Do Application</h2>
<button onclick="toggleDark()">Dark Mode</button><br><br>
<input type="text" id="taskInput" placeholder="Enter task..." />
<button onclick="addTask()">Add</button>
<div id="counts"></div>
<div id="taskList"></div>

<script>
    let allTasks = [];

    function loadTasks() {
        const saved = localStorage.getItem("tasks");
        allTasks = saved ? JSON.parse(saved) : [];
        renderTasks();
    }

    function saveTasks() {
        localStorage.setItem("tasks", JSON.stringify(allTasks));
    }

    function renderTasks() {
        const list = document.getElementById("taskList");
        list.innerHTML = "";
        allTasks.forEach(task => {
            const div = document.createElement("div");
            div.className = "task";
            div.innerHTML = `
                <span class="${task.completed ? 'completed' : ''}">${task.title}</span>
                <div>
                    <button onclick="toggleComplete(${task.id})">${task.completed ? 'Undo' : 'Done'}</button>
                    <button onclick="editTask(${task.id})">Edit</button>
                    <button onclick="deleteTask(${task.id})" style="color:red">Delete</button>
                </div>
            `;
            list.appendChild(div);
        });
        updateCounts();
    }

    function addTask() {
        const title = document.getElementById("taskInput").value.trim();
        if (!title) return;

        const newTask = {
            id: Date.now(),
            title,
            completed: false
        };

        allTasks.push(newTask);
        saveTasks();
        loadTasks();

        document.getElementById("taskInput").value = "";
    }

    function toggleComplete(id) {
        allTasks = allTasks.map(task =>
            task.id === id ? { ...task, completed: !task.completed } : task
        );
        saveTasks();
        loadTasks();
    }

    function editTask(id) {
        const task = allTasks.find(t => t.id === id);
        const newTitle = prompt("Edit task:", task.title);
        if (!newTitle || !newTitle.trim()) return;

        task.title = newTitle.trim();
        saveTasks();
        loadTasks();
    }

    function deleteTask(id) {
        allTasks = allTasks.filter(task => task.id !== id);
        saveTasks();
        loadTasks();
    }

    function toggleDark() {
        document.body.classList.toggle("dark");
    }

    function updateCounts() {
        const total = allTasks.length;
        const completed = allTasks.filter(t => t.completed).length;
        const pending = total - completed;

        document.getElementById("counts").innerText =
            `Total: ${total} | Completed: ${completed} | Pending: ${pending}`;
    }

    loadTasks();
</script>
</body>
</html>

